# ChatVibe

[//]: # (![ChatVibe Logo]&#40;https://via.placeholder.com/150?text=ChatVibe&#41; <!-- Замените на ваш логотип, если есть -->)

**ChatVibe** — это современный веб-мессенджер, созданный для удобного и безопасного общения. Проект сочетает минималистичный интерфейс, поддержку вложений (изображения и файлы), уведомления о непрочитанных сообщениях и адаптивный дизайн. ChatVibe идеально подходит для личного общения, а также может быть расширен для командной работы или интеграции с другими сервисами.

## Основные возможности

- **Чаты в реальном времени**: Общайтесь с друзьями через WebSocket с мгновенной доставкой сообщений.
- **Отправка вложений**: Делитесь изображениями (JPG, PNG, GIF) и другими файлами, которые отображаются в чате с возможностью скачивания.
- **Уведомления о непрочитанных сообщениях**: Чаты с новыми сообщениями подсвечиваются зелёным индикатором.
- **Умный скролл**: При открытии чата автоматически скроллит к последнему сообщению (если все прочитаны) или к первому непрочитанному.
- **Поиск по чатам**: Быстро находите нужный чат по имени пользователя.
- **Аутентификация**: Безопасная регистрация и вход с использованием JWT-токенов.
- **Удаление чатов**: Легко удаляйте ненужные переписки с подтверждением действия.
- **Модальное окно для добавления друзей**: Создавайте новые чаты по имени пользователя или ID.

[//]: # (## Скриншоты)

## Технологии

- **Backend**:
  - **FastAPI**: Высокопроизводительный фреймворк для создания API и WebSocket-сервиса.
  - **SQLAlchemy**: ORM для работы с базой данных.
  - **PostgreSQL/SQLite**: Хранение пользователей, чатов и сообщений (в зависимости от конфигурации).
  - **JWT**: Аутентификация и авторизация с использованием токенов.
  - **Passlib**: Хеширование паролей с использованием bcrypt.

- **Frontend**:
  - **HTML/CSS/JavaScript**: Основной стек для клиентской части.
  - **Tailwind CSS**: Утилитарный CSS-фреймворк для быстрого и адаптивного дизайна.
  - **WebSocket**: Обеспечивает мгновенное обновление сообщений в чате.

- **Дополнительно**:
  - **Python**: Основной язык для серверной логики.
  - **Uvicorn**: ASGI-сервер для запуска FastAPI.
  - **dotenv**: Управление переменными окружения.

## Установка и запуск

### Требования

- Python 3.8+
- PostgreSQL (или SQLite для локального тестирования)
- Git
- Node.js (опционально, для дополнительных инструментов фронтенда)
- Виртуальное окружение (рекомендуется)

### Инструкции

1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/DxTea/ChatVibe.git
   cd ChatVibe
   ```

2. **Создайте и активируйте виртуальное окружение**:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Linux/Mac
   .venv\Scripts\activate     # Windows
   ```

3. **Установите зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Настройте переменные окружения**:
   - Создайте файл `.env` в корне проекта:
     ```
     SECRET_KEY=ваш_секретный_ключ
     DATABASE_URL=sqlite:///chatvibe.db  # или postgresql://user:password@localhost:5432/chatvibe
     ```
   - Сгенерируйте `SECRET_KEY`, например, с помощью:
     ```bash
     python -c "import secrets; print(secrets.token_hex(32))"
     ```

5. **Настройте базу данных**:
   - Для SQLite база создастся автоматически.
   - Для PostgreSQL создайте базу данных:
     ```bash
     createdb chatvibe
     ```
   - Примените миграции (если используете Alembic):
     ```bash
     alembic upgrade head
     ```

6. **Запустите сервер**:
   ```bash
   python -m uvicorn backend.main:app --reload
   ```

7. **Откройте приложение**:
   - Перейдите по адресу `http://localhost:8080` в браузере.
   - Зарегистрируйтесь или войдите, чтобы начать общение.

## API-документация

API автоматически документируется FastAPI. После запуска сервера откройте:
- **Swagger UI**: `http://localhost:8080/docs`
- **ReDoc**: `http://localhost:8080/redoc`

Основные эндпоинты:
- `POST /register`: Регистрация нового пользователя.
- `POST /login`: Аутентификация и получение JWT-токена.
- `GET /users/me`: Информация о текущем пользователе.
- `POST /friends`: Добавление друга и создание чата.
- `GET /chats`: Список всех чатов пользователя.
- `GET /chats/{chat_id}/messages`: Получение сообщений чата.
- `POST /chats/{chat_id}/messages`: Отправка сообщения или вложения.
- `DELETE /chats/{chat_id}`: Удаление чата.
- `GET /chats/unread`: Список чатов с непрочитанными сообщениями.
- `WebSocket /chats/{chat_id}/ws`: Подключение для реального времени.

## Структура проекта

```
ChatVibe/
├── backend/
│   ├── migrations/      # Миграции базы данных (если используете Alembic)
│   ├── __init__.py
│   ├── main.py          # Основной файл FastAPI
│   ├── database.py      # Конфигурация базы данных
│   ├── models.py        # Модели SQLAlchemy
│   ├── schemas.py       # Схемы Pydantic
│   └── auth.py          # Логика аутентификации
│   ├── alembic.ini      # Конфигурация Alembic
├── static/
│   ├── css/
│   │   └── styles.css   # Пользовательские стили
│   ├── js/
│   │   └── main.js      # Клиентская логика
│   │   └── auth.js      # Логика авторизации
│   ├── index.html       # Главная страница
│   ├── auth.html        # Страница авторизации
│   └── main.html        # Основной интерфейс чата
├── uploads/             # Папка для загруженных файлов
├── .env                 # Переменные окружения
├── requirements.txt     # Зависимости Python
└── README.md            # Документация
```

[//]: # (## Планы по развитию)

[//]: # ()
[//]: # (- **Поддержка групповых чатов**: Возможность создавать чаты с несколькими участниками.)

[//]: # (- **Шифрование сообщений**: Реализация end-to-end шифрования для повышения приватности.)

[//]: # (- **Уведомления**: Push-уведомления для новых сообщений через браузер или мобильное приложение.)

[//]: # (- **Предпросмотр файлов**: Отображение миниатюр для PDF и других форматов.)

[//]: # (- **Мобильная версия**: Оптимизация интерфейса для мобильных устройств.)

[//]: # (- **Локализация**: Добавление поддержки нескольких языков.)

[//]: # (- **Интеграция с облаком**: Хранение вложений в S3 или аналогичных сервисах.)

[//]: # (## Контрибьютинг)

[//]: # ()
[//]: # (Мы приветствуем любые вклады в проект! Чтобы внести изменения:)

[//]: # (1. Форкните репозиторий.)

[//]: # (2. Создайте ветку для вашей фичи: `git checkout -b feature/название-фичи`.)

[//]: # (3. Закоммитьте изменения: `git commit -m "Добавлена фича X"`.)

[//]: # (4. Запушьте в ваш форк: `git push origin feature/название-фичи`.)

[//]: # (5. Создайте Pull Request с описанием изменений.)

[//]: # ()
[//]: # (Пожалуйста, следуйте [Contributor Covenant Code of Conduct]&#40;https://www.contributor-covenant.org/&#41;.)

## Лицензия

Проект распространяется под лицензией [MIT License](LICENSE). Вы можете свободно использовать, модифицировать и распространять код в соответствии с условиями лицензии.

## Контакты

- **Автор**: [DxTea](https://github.com/DxTea)
- **Репозиторий**: [github.com/<DxTea>/ChatVibe](https://github.com/<DxTea>/ChatVibe)
- **Issues**: Сообщайте о багах или предлагайте идеи в [Issues](https://github.com/<DxTea>/ChatVibe/issues)

---

**ChatVibe** — общайтесь с удовольствием! 🚀